const config={apiKey:"AIzaSyCXkqAFgbz3hP6LLpQt11iJzXcXrc8MDgU",authDomain:"mealticket-1585f.firebaseapp.com",databaseURL:"https://mealticket-1585f-default-rtdb.firebaseio.com",projectId:"mealticket-1585f",storageBucket:"mealticket-1585f.appspot.com",messagingSenderId:"171132223510",appId:"1:171132223510:web:13ea0883b7e66187893537",measurementId:"G-MS6L1K17ED"};firebase.initializeApp(config);const writeData=()=>{firebase.database().ref("tickets/").set({menu:[{name:"唐揚げ定食",number:0,price:500},{name:"唐揚げ弁当",number:0,price:500},{name:"デイリーランチ",number:10,price:370},{name:"デイリーランチライス小",number:10,price:350},{name:"デイリーランチライス大",number:10,price:420},{name:"唐揚げ丼L",number:10,price:470},{name:"唐揚げ丼M",number:10,price:390},{name:"カレーライス",number:10,price:310},{name:"カレー大盛",number:10,price:360},{name:"ミニカレー",number:10,price:160},{name:"生卵",number:10,price:50},{name:"温泉卵",number:10,price:50},{name:"チーズ",number:10,price:50},{name:"コロッケ",number:10,price:50},{name:"日替わりトッピング",number:10,price:80},{name:"特別中華麺",number:10,price:540},{name:"日替わり中華麺",number:10,price:420},{name:"特別麺そば",number:10,price:540},{name:"特別麺うどん",number:10,price:540},{name:"日替わりそば",number:10,price:300},{name:"日替わりうどん",number:10,price:300},{name:"麺大盛+半玉",number:10,price:50},{name:"麺ジャンボ+1玉",number:10,price:100},{name:"きつね",number:10,price:30},{name:"たぬき",number:10,price:30},{name:"竹輪天",number:10,price:50},{name:"カレーソース",number:10,price:90},{name:"かき揚げ",number:10,price:50},{name:"小鉢サラダ",number:10,price:80},{name:"ライス大",number:10,price:150},{name:"ライス中",number:10,price:100},{name:"ライス小",number:10,price:80},{name:"味噌汁",number:10,price:30},{name:"ソフトクリーム",number:10,price:200}]})},menuRef=firebase.database().ref("tickets/menu");menuRef.once("value",n=>{const t=n.val();for(let n=0;n<t.length;n++){const e=document.getElementById("js-menuCard_wrapper"),r=document.createElement("p"),u=document.createElement("p"),f=document.createElement("p"),i=document.createElement("button");r.classList.add("menuCard_name");r.innerHTML=t[n].name;u.classList.add("menuCard_number");u.innerHTML="未受取数: "+t[n].number;f.classList.add("menuCard_price");f.innerHTML=t[n].price+"円";i.classList.add("menuCard");i.setAttribute("id",`menuCard-${n}`);const o=[t[n].name,t[n].number,t[n].price];i.addEventListener("click",()=>displayDetail(o));i.insertAdjacentElement("beforeend",r);i.insertAdjacentElement("beforeend",u);i.insertAdjacentElement("beforeend",f);e.insertAdjacentElement("beforeend",i)}});const displayDetail=n=>{const o=document.getElementById("js-main"),t=document.createElement("div"),i=document.createElement("div"),u=document.createElement("p"),f=document.createElement("p"),e=document.createElement("p"),r=document.createElement("button");t.classList.add("menuDetail");t.setAttribute("id","js-menuDetail");i.classList.add("menuDetail_backScreen");i.setAttribute("id","js-backScreen");u.classList.add("menuDetail_name");u.innerHTML=n[0];f.classList.add("menuDetail_num");f.innerHTML="未受取人数"+n[1];e.classList.add("menuDetail_price");e.innerHTML=n[2]+"円";r.classList.add("menuDetail_order");r.innerHTML="注文";t.insertAdjacentElement("beforeend",u);t.insertAdjacentElement("beforeend",f);t.insertAdjacentElement("beforeend",e);t.insertAdjacentElement("beforeend",r);o.insertAdjacentElement("beforeend",i);o.insertAdjacentElement("beforeend",t);i.addEventListener("click",()=>{i.remove(),t.remove()});r.addEventListener("click",()=>displayTicket(n[0]))},displayTicket=n=>{const u=document.getElementById("js-backScreen"),f=document.getElementById("js-menuDetail"),e=document.getElementById("js-ordered_inner"),o=document.getElementById("js-ordered_none"),t=document.createElement("div"),r=document.createElement("p"),i=document.createElement("button");o.classList.add("hidden");r.classList.add("ordered_title");r.innerHTML=n;i.classList.add("ordered_button");i.innerHTML="受け取り";t.classList.add("ordered_card");t.insertAdjacentElement("beforeend",r);t.insertAdjacentElement("beforeend",i);e.insertAdjacentElement("beforeend",t);u!==null&f!==null&&(u.remove(),f.remove());i.addEventListener("click",()=>displayReserve(n))},displayReserve=n=>{const a=document.getElementById("js-ordered_wrapper"),l=document.getElementById("js-ordered_inner"),t=document.createElement("p"),r=document.createElement("button"),i=document.createElement("div"),o=document.createElement("p"),u=document.createElement("div"),s=document.createElement("p"),h=document.createElement("p"),f=document.createElement("div"),e=document.createElement("input"),c=document.createElement("button");s.classList.add("code_title");s.innerHTML="受け取りコード";h.classList.add("code_num");h.innerHTML="w4FimR5u";u.classList.add("code");u.insertAdjacentElement("beforeend",s);u.insertAdjacentElement("beforeend",h);e.classList.add("form_input");e.setAttribute("type","text");e.setAttribute("placeholder","確認番号を入力");c.classList.add("form_button");c.innerHTML="確認";f.classList.add("form");f.insertAdjacentElement("beforeend",e);f.insertAdjacentElement("beforeend",c);o.classList.add("menu");o.innerHTML=n;r.classList.add("reserve_back");r.innerHTML="戻る";i.classList.add("reserve_inner");i.insertAdjacentElement("beforeend",o);i.insertAdjacentElement("beforeend",u);i.insertAdjacentElement("beforeend",f);t.classList.add("reserve");t.insertAdjacentElement("beforeend",r);t.insertAdjacentElement("beforeend",i);a.insertAdjacentElement("beforeend",t);l.classList.add("hidden");r.addEventListener("click",()=>{t.remove(),l.classList.remove("hidden")})},tabbar=document.getElementById("js-tabbar");buttons=tabbar.children;Array.from(buttons).forEach((n,t)=>{const r=document.getElementById("js-menuCard_wrapper"),u=document.getElementById("js-ordered_wrapper"),i=[r,u];n.addEventListener("click",()=>{Array.from(buttons)[t].classList.contains("pressed")||(Array.from(buttons).forEach(n=>{n.classList.remove("pressed")}),n.classList.add("pressed"),i.forEach(n=>{n.classList.add("hidden")}),i[t].classList.remove("hidden"))})})